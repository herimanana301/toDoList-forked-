{"ast":null,"code":"var _jsxFileName = \"/Users/landy/Desktop/selfProject/toDoList_project/src/App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport ToDoForm from \"./components/ToDoForm\";\nimport ToDoList from \"./components/ToDoList\";\nimport LoginForm from \"./components/LoginForm\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [token, setToken] = useState(localStorage.getItem('token') || null);\n  useEffect(() => {\n    // Fetch tasks from the Flask API only if authenticated\n    if (token) {\n      fetch(\"/api/tasks\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(data => {\n        setTasks(data.tasks);\n      }).catch(error => {\n        console.error(\"Error fetching tasks:\", error);\n        // Handle token expiration or invalid token\n        if (error.status === 401) {\n          setIsAuthenticated(false);\n          localStorage.removeItem('token');\n        }\n      });\n    }\n  }, [token]);\n  const handleLogin = async credentials => {\n    // Perform login\n    const response = await fetch(\"/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    });\n    if (response.ok) {\n      const data = await response.json();\n      const jwtToken = data.access_token;\n\n      // Store the token and update the state\n      localStorage.setItem('token', jwtToken);\n      setToken(jwtToken);\n      setIsAuthenticated(true);\n    } else {\n      console.error(\"Login failed\");\n    }\n  };\n  const handleLogout = () => {\n    // Clear token from localStorage and reset state\n    localStorage.removeItem('token');\n    setToken(null);\n    setIsAuthenticated(false);\n    setTasks([]);\n  };\n  const addTask = async task => {\n    const response = await fetch(\"/api/tasks\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      },\n      body: JSON.stringify(task)\n    });\n    if (response.ok) {\n      const newTask = await response.json();\n      setTasks(prevTasks => [...prevTasks, newTask]);\n    } else {\n      console.error(\"Failed to add task\");\n    }\n  };\n  const deleteTask = async taskId => {\n    const response = await fetch(`/api/tasks/${taskId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    if (response.ok) {\n      setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));\n    } else {\n      console.error(\"Failed to delete task\");\n    }\n  };\n  const completeTask = async taskId => {\n    const response = await fetch(`/tasks/${taskId}/complete`, {\n      method: \"PUT\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    if (response.ok) {\n      setTasks(prevTasks => prevTasks.map(task => task.id === taskId ? {\n        ...task,\n        completed: true\n      } : task));\n    } else {\n      console.error(\"Failed to complete task\");\n    }\n  };\n  const editTask = async (taskId, editedTask) => {\n    const updatedTask = {\n      description: editedTask.description,\n      priority: editedTask.priority,\n      category: editedTask.category,\n      deadline: editedTask.deadline\n    };\n    const response = await fetch(`/api/tasks/${taskId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      },\n      body: JSON.stringify(updatedTask)\n    });\n    if (response.ok) {\n      const updatedTaskFromServer = await response.json();\n      setTasks(prevTasks => prevTasks.map(task => task.id === taskId ? updatedTaskFromServer.task : task));\n    } else {\n      console.error(\"Failed to update task\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"ToDo List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), !isAuthenticated ? /*#__PURE__*/_jsxDEV(LoginForm, {\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ToDoForm, {\n        addTask: addTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ToDoList, {\n        tasks: tasks,\n        deleteTask: deleteTask,\n        completeTask: completeTask,\n        editTask: editTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ErYoYyeOggATpGQn0AfWH9nbzeE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","ToDoForm","ToDoList","LoginForm","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","tasks","setTasks","isAuthenticated","setIsAuthenticated","token","setToken","localStorage","getItem","fetch","headers","then","res","json","data","catch","error","console","status","removeItem","handleLogin","credentials","response","method","body","JSON","stringify","ok","jwtToken","access_token","setItem","handleLogout","addTask","task","newTask","prevTasks","deleteTask","taskId","filter","id","completeTask","map","completed","editTask","editedTask","updatedTask","description","priority","category","deadline","updatedTaskFromServer","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","onClick","_c","$RefreshReg$"],"sources":["/Users/landy/Desktop/selfProject/toDoList_project/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport ToDoForm from \"./components/ToDoForm\";\nimport ToDoList from \"./components/ToDoList\";\nimport LoginForm from \"./components/LoginForm\";\n\nfunction App() {\n  const [tasks, setTasks] = useState([]);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [token, setToken] = useState(localStorage.getItem('token') || null);\n\n  useEffect(() => {\n    // Fetch tasks from the Flask API only if authenticated\n    if (token) {\n      fetch(\"/api/tasks\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setTasks(data.tasks);\n        })\n        .catch((error) => {\n          console.error(\"Error fetching tasks:\", error);\n          // Handle token expiration or invalid token\n          if (error.status === 401) {\n            setIsAuthenticated(false);\n            localStorage.removeItem('token');\n          }\n        });\n    }\n  }, [token]);\n\n  const handleLogin = async (credentials) => {\n    // Perform login\n    const response = await fetch(\"/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(credentials),\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      const jwtToken = data.access_token;\n\n      // Store the token and update the state\n      localStorage.setItem('token', jwtToken);\n      setToken(jwtToken);\n      setIsAuthenticated(true);\n    } else {\n      console.error(\"Login failed\");\n    }\n  };\n\n  const handleLogout = () => {\n    // Clear token from localStorage and reset state\n    localStorage.removeItem('token');\n    setToken(null);\n    setIsAuthenticated(false);\n    setTasks([]);\n  };\n\n  const addTask = async (task) => {\n    const response = await fetch(\"/api/tasks\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n      },\n      body: JSON.stringify(task),\n    });\n\n    if (response.ok) {\n      const newTask = await response.json();\n      setTasks((prevTasks) => [...prevTasks, newTask]);\n    } else {\n      console.error(\"Failed to add task\");\n    }\n  };\n\n  const deleteTask = async (taskId) => {\n    const response = await fetch(`/api/tasks/${taskId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n      },\n    });\n\n    if (response.ok) {\n      setTasks((prevTasks) => prevTasks.filter((task) => task.id !== taskId));\n    } else {\n      console.error(\"Failed to delete task\");\n    }\n  };\n\n  const completeTask = async (taskId) => {\n    const response = await fetch(`/tasks/${taskId}/complete`, {\n      method: \"PUT\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n      },\n    });\n\n    if (response.ok) {\n      setTasks((prevTasks) =>\n        prevTasks.map((task) =>\n          task.id === taskId ? { ...task, completed: true } : task\n        )\n      );\n    } else {\n      console.error(\"Failed to complete task\");\n    }\n  };\n\n  const editTask = async (taskId, editedTask) => {\n    const updatedTask = {\n      description: editedTask.description,\n      priority: editedTask.priority,\n      category: editedTask.category,\n      deadline: editedTask.deadline,\n    };\n\n    const response = await fetch(`/api/tasks/${taskId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n      },\n      body: JSON.stringify(updatedTask),\n    });\n\n    if (response.ok) {\n      const updatedTaskFromServer = await response.json();\n      setTasks((prevTasks) =>\n        prevTasks.map((task) =>\n          task.id === taskId ? updatedTaskFromServer.task : task\n        )\n      );\n    } else {\n      console.error(\"Failed to update task\");\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>ToDo List</h1>\n      {!isAuthenticated ? (\n        <LoginForm onLogin={handleLogin} />\n      ) : (\n        <>\n          <button onClick={handleLogout}>Logout</button>\n          <ToDoForm addTask={addTask} />\n          <ToDoList\n            tasks={tasks}\n            deleteTask={deleteTask}\n            completeTask={completeTask}\n            editTask={editTask}\n          />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}